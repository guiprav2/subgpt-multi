{"index.html":"<!doctype html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <title>subgpt2</title>\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1, maximum-scale=1\"\n    />\n  <script type=\"text/javascript\">\n    !localStorage.getItem('webfoundry:dev') && (function(c,l,a,r,i,t,y){\n      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};\n      t=l.createElement(r);t.async=1;t.src=\"https://www.clarity.ms/tag/\"+i;\n      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);\n    })(window, document, \"clarity\", \"script\", \"ubdofctfo6\");\n  </script>\n  </head>\n  <body class=\"flex flex-col [&>div:first-child]:flex-1 min-h-screen\">\n    <script type=\"module\">\n      (async () => {\n        window.rootPrefix = /^\\/(files|preview)\\//.test(location.pathname) ? location.pathname.split('/').slice(0, 4).join('/') : '/';\n        if (rootPrefix === '/' || rootPrefix === '/collab.html') rootPrefix = '.';\n        let wforigin = new URL(location.href).searchParams.get('isolate') || location.origin;\n        if (/^(\\w+\\.)?(webfoundry.app|webfoundry\\d+\\.netlify\\.app|localhost)$/.test(wforigin)) throw new Error(`Bad isolation origin`);\n        if (new URL(location.href).searchParams.get('isolate') != null) {\n          await navigator.serviceWorker.register('/sw.js');\n          await navigator.serviceWorker.ready;\n          if (!navigator.serviceWorker.controller) return location.reload();\n          let parts = location.pathname.slice(1).split('/');\n          let tabId = parts[1];\n          window.wfThisProject = parts[2];\n          navigator.serviceWorker.addEventListener('message', async event => {\n            let { type, project, path } = event.data || {};\n            if (type !== 'fetch' || wfThisProject !== project) return;\n            let port = event.ports?.[0];\n            if (!port) return;\n            let handler = ev => {\n              let data = ev.data || {};\n              if (data.type !== 'fetch:res' || data.project !== project || data.path !== path) return;\n              removeEventListener('message', handler);\n              port.postMessage(data);\n            };\n            addEventListener('message', handler);\n            parent.postMessage({ type: 'fetch', project, path }, wforigin);\n          });\n          let register = () => navigator.serviceWorker.controller.postMessage({ type:'webfoundry-register-tab', tabId });\n          navigator.serviceWorker.addEventListener('controllerchange', register);\n          register();\n          if (!location.pathname.startsWith('/preview/')) {\n            let path = parts.slice(3).join('/');\n            if (path !== 'index.html') {\n              let handler = async ev => {\n                let data = ev.data || {};\n                if (data.type !== 'fetch:res' || data.project !== wfThisProject || data.path !== path) return;\n                removeEventListener('message', handler);\n                document.open();\n                document.write(await data.data.text());\n                document.close();\n              };\n              addEventListener('message', handler);\n              parent.postMessage({ type: 'fetch', project: wfThisProject, path }, wforigin);\n              return;\n            }\n          }\n          await new Promise(pres => setTimeout(pres, 100));\n        }\n        if (location.pathname.includes('/files/')) return;\n        let [, md, mapp] = await Promise.all([\n          import(`${rootPrefix}/webfoundry/head.js`),\n          import(`${rootPrefix}/webfoundry/dominant.js`),\n          import(`${rootPrefix}/webfoundry/app.js`),\n        ]);\n        document.body.prepend(md.default.el(mapp.default));\n        parent.postMessage({ path: `pages/${location.pathname.slice(1).split('/').slice(3).join('/')}`, type: 'ready', status: 200 }, wforigin);\n      })();\n    </script>\n  </body>\n</html>\n","pages/index.html":"<!doctype html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <title></title>\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1, maximum-scale=1\"\n    />\n    <script>\n      window.rootPrefix = /^\\/(files|preview)\\//.test(location.pathname)\n        ? location.pathname.split('/').slice(0, 4).join('/')\n        : '/';\n    </script>\n    <script type=\"module\" src=\"../webfoundry/ifdesigner.js\"></script>\n    <script src=\"../webfoundry/head.js\"></script>\n  </head>\n  <body\n    class=\"flex flex-col [&amp;&gt;div:first-child]:flex-1 min-h-screen\"\n    style=\"display: none\"\n  >\n    <div\n      class=\"min-h-screen flex flex-col sm:flex-row w-screen\"\n      wf-onattach=\"post('main.init')\"\n    >\n      <style>\n        em {\n          font-style: normal;\n          font-weight: bold;\n        }\n      </style>\n      <div\n        class=\"flex-col gap-3 p-8 z-10 shadow-xl flex w-screen sm:w-80 md:w-96 bg-neutral-100 overflow-auto h-screen\"\n        wf-class=\"{{replaces flex: state.main.sidebarOpen ? 'flex' : 'hidden sm:flex'}}\"\n      >\n        <div class=\"flex items-center gap-2 pl-3\">\n          <div\n            class=\"nf nf-md-chat_processing_outline text-lg\"\n            wf-class=\"{{replaces nf-md-chat_processing_outline: { threads: 'nf-md-chat_processing_outline', rooms: 'nf-fa-users', settings: 'nf-md-cog' }[state.main.tmp.panel]}}\"\n            wf-if=\"state.main.tmp.panel\"\n          ></div>\n          <div class=\"truncate\" wf-if=\"state.main.tmp.panel\">\n            {{state.main.tmp.panel[0].toUpperCase() + state.main.tmp.panel.slice(1)}}\n          </div>\n          <div class=\"flex-1\"></div>\n          <div\n            class=\"flex items-center gap-0.5 text-gray-400\"\n            wf-if=\"state.main.options.oaiKey || state.main.options.xaiKey\"\n          >\n            <button\n              class=\"nf p-1.5 outline-none rounded-full hover:text-gray-800 nf-fa-clone\"\n              wf-onclick=\"post('main.cloneThread')\"\n              wf-if=\"state.main.thread?.logs?.length\"\n              value=\"\"\n            ></button>\n\n            <button\n              class=\"nf p-1.5 outline-none rounded-full hover:text-gray-800 nf-md-filter_outline\"\n              wf-if=\"state.main.displayedThreads.length &amp;&amp; (state.main.options.filter.length || state.main.tags.length)\"\n              value=\"\"\n              wf-onclick=\"post('main.toggleShowFilter', event)\"\n              wf-class=\"{{state.main.tmp.showFilter &amp;&amp; 'bg-gray-200 text-gray-800'}} {{state.main.options.filter.length &amp;&amp; 'text-blue-600 hover:text-blue-600'}}\"\n            ></button>\n            <button\n              class=\"nf p-1.5 outline-none rounded-full hover:text-gray-800 nf-md-archive_search\"\n              wf-onclick=\"post('main.toggleArchives', event)\"\n              wf-class=\"{{state.main.tmp.panel === 'archives' &amp;&amp; 'bg-gray-200 text-gray-800'}}\"\n              value=\"\"\n              wf-if=\"state.main.tmp.panel === 'archives' || state.main.threads.some(x =&gt; x.archived)\"\n            ></button\n            ><button\n              class=\"p-1.5 outline-none rounded-full hover:text-gray-800 flex gap-1 items-center\"\n              wf-onclick=\"post('main.toggleRooms')\"\n              wf-class=\"{{replaces hover:text-gray-800: state.main.tmp.panel !== 'rooms' ? (!state.main.options.rooms?.some?.(x =&gt; x.active) ? 'hover:text-gray-800' : 'text-green-600 hover:text-green-700') : (!state.main.options.rooms?.some?.(x =&gt; x.active) ? 'bg-gray-200 text-gray-800' : 'bg-green-200 text-green-600 hover:text-green-700')}}\"\n              value=\"\"\n            >\n              <div\n                class=\"truncate max-w-6 text-xs\"\n                wf-if=\"state.main.options.rooms.filter(x =&gt; x.active).length\"\n              >\n                {{state.main.options.rooms.filter(x =&gt; x.active).length}}\n              </div>\n              <div class=\"nf nf-fa-users\"></div>\n            </button>\n            <button\n              class=\"nf nf-md-cog p-1.5 outline-none rounded-full hover:text-gray-800\"\n              wf-onclick=\"post('main.toggleSettings')\"\n              wf-class=\"{{state.main.tmp.panel === 'settings' &amp;&amp; 'bg-gray-200 text-gray-800'}}\"\n              value=\"\"\n            ></button>\n          </div>\n        </div>\n\n        <!-- Typeahead input -->\n        <!-- Display currently selected tags -->\n        <div\n          class=\"flex items-center gap-1.5 flex-wrap\"\n          wf-if=\"state.main.tmp.showFilter\"\n        >\n          <div\n            class=\"text-sm px-2 py-0.5 rounded-full shrink-0 flex items-center gap-2 bg-blue-200 text-blue-600\"\n            wf-map=\"x of state.main.options.filter.slice().sort()\"\n          >\n            <div class=\"relative -top-[1px]\">{{x}}</div>\n            <button\n              class=\"relative -top-[1px] outline-none\"\n              wf-onclick=\"post('main.rmFilter', x)\"\n              value=\"\"\n            >\n              √ó\n            </button>\n          </div>\n          <button\n            class=\"nf nf-fa-plus text-gray-400 outline-none text-sm px-1 py-0.5\"\n            wf-onclick=\"post('main.toggleFilterInput')\"\n            wf-if=\"!state.main.showFilterInput &amp;&amp; state.main.options.filter.length\"\n            value=\"\"\n          ></button>\n          <div\n            class=\"relative min-w-20 flex-1\"\n            wf-if=\"state.main.tmp.showFilterInput || !state.main.options.filter.length\"\n          >\n            <input\n              type=\"text\"\n              placeholder=\"add filter\"\n              class=\"border px-2 py-0.5 outline-none w-32 text-sm rounded-full text-center w-full\"\n              value=\"\"\n              id=\"taginput\"\n              wf-onkeyup=\"post('main.filterKeyUp', event)\"\n              wf-onblur=\"post('main.toggleFilterInput')\"\n              wf-onattach=\"_1.select()\"\n            />\n            <div\n              class=\"border p-2 rounded bg-white shadow max-h-48 overflow-auto absolute left-1 right-1 flex flex-col text-sm gap-1 top-[110%]\"\n              wf-if=\"document.querySelector('#taginput').value.trim() || state.main.tmp.tagSuggestions?.length\"\n              hidden=\"\"\n            >\n              <button\n                class=\"underline text-blue-600\"\n                wf-map=\"x of state.main.tmp.tagSuggestions?.slice?.()?.sort?.()\"\n                wf-onclick=\"post('main.filter', x)\"\n                value=\"\"\n              >\n                {{x}}\n              </button>\n              <div\n                class=\"text-center\"\n                wf-if=\"!state.main.tmp.tagSuggestions?.length\"\n              >\n                no such tag found\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"mt-2 flex-1\" wf-if=\"state.main.tmp.panel === 'settings'\">\n          <div>\n            <div class=\"flex items-center justify-between mb-4\">\n              <div class=\"flex items-center gap-1.5\">\n                <div>üôçüèª‚Äç‚ôÇÔ∏è</div>\n                <span class=\"text-gray-700 text-sm\">Display Name</span>\n              </div>\n              <input\n                value=\"\"\n                class=\"w-36 bg-white rounded border border-slate-200 px-3 outline-none focus:border-slate-400\"\n                placeholder=\"Your name\"\n                wf-value=\"state.main.options.displayName\"\n                wf-onkeyup=\"post('main.persist')\"\n              />\n            </div>\n            <div class=\"flex items-center justify-between mb-4\">\n              <div class=\"flex items-center gap-1.5\">\n                <div>üîë</div>\n                <span class=\"text-gray-700 text-sm\">OpenAI Key</span>\n              </div>\n              <input\n                value=\"\"\n                class=\"w-36 bg-white rounded border border-slate-200 px-3 outline-none focus:border-slate-400\"\n                type=\"password\"\n                placeholder=\"sk-shhh...\"\n                wf-value=\"state.main.options.oaiKey\"\n                wf-onkeyup=\"post('main.persist')\"\n              />\n            </div>\n            <div class=\"flex items-center justify-between mb-4\">\n              <div class=\"flex items-center gap-1.5\">\n                <div>üîë</div>\n                <span class=\"text-gray-700 text-sm\">xAI Key</span>\n              </div>\n              <input\n                value=\"\"\n                class=\"w-36 bg-white rounded border border-slate-200 px-3 outline-none focus:border-slate-400\"\n                type=\"password\"\n                placeholder=\"xai-shhh...\"\n                wf-value=\"state.main.options.xaiKey\"\n                wf-onkeyup=\"post('main.persist')\"\n              />\n            </div>\n            <div wf-if=\"state.main.options.oaiKey || state.main.options.xaiKey\">\n              <div class=\"flex items-center justify-between mb-4\">\n                <div class=\"flex items-center gap-1.5\">\n                  <div>üè∑Ô∏è</div>\n                  <span class=\"text-gray-700 text-sm\"> Automatic Tagging </span>\n                </div>\n                <label class=\"relative inline-flex items-center cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    class=\"peer hidden\"\n                    wf-checked=\"state.main.options.autotag\"\n                    wf-onchange=\"post('main.toggleAutoTagging', event)\"\n                    value=\"on\"\n                  />\n                  <div\n                    class=\"w-11 h-6 bg-gray-300 rounded-full peer-checked:bg-green-500\"\n                  ></div>\n                  <div\n                    class=\"absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform peer-checked:translate-x-5\"\n                  ></div>\n                </label>\n              </div>\n              <div class=\"flex items-center justify-between mb-4\">\n                <div class=\"flex items-center gap-1.5\">\n                  <div>1Ô∏è‚É£</div>\n                  <span class=\"text-gray-700 text-sm\">Unary Messaging</span>\n                </div>\n                <label class=\"relative inline-flex items-center cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    class=\"peer hidden\"\n                    wf-checked=\"state.main.options.unary\"\n                    wf-onchange=\"post('main.toggleUnaryMessaging', event)\"\n                    value=\"on\"\n                  />\n                  <div\n                    class=\"w-11 h-6 bg-gray-300 rounded-full peer-checked:bg-green-500\"\n                  ></div>\n                  <div\n                    class=\"absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform peer-checked:translate-x-5\"\n                  ></div>\n                </label>\n              </div>\n              <div class=\"flex items-center justify-between mb-4\">\n                <div class=\"flex items-center gap-1.5\">\n                  <div>üòè</div>\n                  <span class=\"text-gray-700 text-sm\"> Show Erotica </span>\n                </div>\n                <label class=\"relative inline-flex items-center cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    class=\"peer hidden\"\n                    wf-checked=\"state.main.options.showErotica\"\n                    wf-onchange=\"post('main.toggleShowErotica', event)\"\n                    value=\"on\"\n                  />\n                  <div\n                    class=\"w-11 h-6 bg-gray-300 rounded-full peer-checked:bg-green-500\"\n                  ></div>\n                  <div\n                    class=\"absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform peer-checked:translate-x-5\"\n                  ></div>\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div\n          class=\"flex-1 flex flex-col justify-center items-center gap-4\"\n          wf-if=\"state.main.tmp.panel === 'threads' &amp;&amp; !state.main.displayedThreads.length &amp;&amp; !state.main.thread\"\n        >\n          <div class=\"nf nf-fa-star text-6xl text-gray-300\"></div>\n          <div class=\"text-gray-400\">Start a new thread!</div>\n        </div>\n        <div\n          class=\"flex-1 flex flex-col justify-center items-center gap-4\"\n          wf-if=\"state.main.tmp.panel === 'archives' &amp;&amp; !state.main.displayedThreads.length\"\n        >\n          <div class=\"nf text-6xl text-gray-300 nf-md-delete_empty\"></div>\n          <div class=\"text-gray-400\">Archives are empty.</div>\n        </div>\n\n        <div\n          class=\"flex-1 flex flex-col gap-1.5 min-h-0 overflow-auto basis-0 min-h-min\"\n          wf-map=\"room of state.main.options.rooms?.filter?.(x =&gt; x.active &amp;&amp; state.main.tmp.roomThreads?.[x.id]?.length)\"\n        >\n          <div\n            class=\"uppercase text-sm tracking-widest text-gray-400 text-right\"\n          >\n            {{room.name}}\n          </div>\n          <div\n            class=\"\"\n            wf-map=\"thread of state.main.tmp.roomThreads?.[room.id] || []\"\n          >\n            <button\n              class=\"rounded-lg border border-[#dfe2e5] bg-white shadow px-3 py-2 flex items-center justify-between group text-sm hover:bg-gray-900 hover:text-white outline-none w-full lightweight\"\n              wf-onclick=\"post('main.openThread', thread)\"\n              value=\"\"\n            >\n              <div class=\"flex items-center gap-1.5\">\n                <div\n                  class=\"nf nf-fa-chevron_right relative top-px\"\n                  wf-if=\"state.main.thread === thread\"\n                ></div>\n                <div class=\"text-left\">{{thread.name || '...'}}</div>\n                <div\n                  class=\"text-base nf nf-md-fire text-gray-400 group-hover:text-gray-300\"\n                  wf-if=\"thread.tags?.includes?.('erotica')\"\n                ></div>\n              </div>\n            </button>\n          </div>\n        </div>\n        <div\n          class=\"flex-1 flex flex-col gap-1.5 min-h-0 overflow-auto basis-0 min-h-min\"\n          wf-if=\"state.main.displayedThreads.length\"\n        >\n          <div\n            class=\"uppercase text-sm tracking-widest text-gray-400 text-right\"\n            wf-if=\"state.main.options.rooms?.some?.(x =&gt; x.active)\"\n          >\n            My Threads\n          </div>\n          <div class=\"\" wf-map=\"thread of state.main.displayedThreads\">\n            <button\n              class=\"rounded-lg border border-[#dfe2e5] bg-white shadow px-3 py-2 flex items-center justify-between group text-sm hover:bg-gray-900 hover:text-white outline-none w-full lightweight\"\n              wf-onclick=\"post('main.openThread', thread)\"\n              value=\"\"\n            >\n              <div class=\"flex items-center gap-1.5\">\n                <div\n                  class=\"nf nf-fa-chevron_right relative top-px\"\n                  wf-if=\"state.main.thread === thread\"\n                ></div>\n                <div class=\"text-left\">{{thread.name || '...'}}</div>\n                <div\n                  class=\"text-base nf nf-md-fire text-gray-400 group-hover:text-gray-300\"\n                  wf-if=\"thread.tags?.includes?.('erotica')\"\n                ></div>\n              </div>\n              <div>\n                <div class=\"flex gap-1.5 items-center\">\n                  <div\n                    class=\"text-gray-300 justify-center items-center relative top-[1px] hover:text-gray-100 hidden gap-1 group-hover:flex\"\n                    wf-onclick=\"post('main.shareThread', event, thread)\"\n                    wf-class=\"{{replaces hidden text-gray-300: !thread.rooms?.length ? 'hidden text-gray-300' : 'flex text-green-600 hover:text-green-700'}}\"\n                    wf-if=\"state.main.options.rooms?.length\"\n                  >\n                    <div\n                      class=\"truncate max-w-6 text-xs\"\n                      wf-if=\"thread.rooms?.length\"\n                    >\n                      {{thread.rooms?.length}}\n                    </div>\n                    <div class=\"nf nf-fa-users\"></div>\n                  </div>\n                  <div\n                    class=\"nf nf-fa-archive hidden group-hover:block text-gray-300 flex justify-center items-center relative top-[1px] hover:text-gray-100\"\n                    wf-if=\"!thread.archived\"\n                    wf-onclick=\"post('main.toggleArchived', event, thread)\"\n                  ></div>\n                  <div\n                    class=\"nf hidden group-hover:block text-gray-300 nf-md-replay flex justify-center items-center hover:text-gray-100\"\n                    wf-if=\"thread.archived\"\n                    wf-onclick=\"post('main.toggleArchived', event, thread)\"\n                  ></div>\n                  <div\n                    class=\"nf hidden group-hover:block text-gray-300 nf-oct-x flex justify-center items-center relative top-[1px] hover:text-gray-100\"\n                    wf-if=\"thread.archived\"\n                    wf-onclick=\"post('main.rm', event, thread)\"\n                  ></div>\n                </div>\n              </div>\n            </button>\n          </div>\n        </div>\n        <div\n          class=\"flex-1 flex flex-col gap-1.5 min-h-0 overflow-auto basis-0 min-h-min\"\n          wf-if=\"state.main.tmp.panel === 'rooms'\"\n        >\n          <div\n            class=\"flex-1 flex flex-col justify-center items-center gap-4\"\n            wf-if=\"!state.main.options.rooms?.length\"\n          >\n            <div class=\"nf text-6xl text-gray-300 nf-fa-users\"></div>\n            <div class=\"text-gray-400\">Create or join a new room!</div>\n          </div>\n          <div class=\"\" wf-map=\"room of state.main.options.rooms\">\n            <button\n              class=\"rounded-lg border border-[#dfe2e5] bg-white shadow px-3 py-2 flex items-center justify-between group text-sm hover:bg-gray-900 hover:text-white outline-none w-full lightweight\"\n              wf-onclick=\"post('main.toggleRoom', room)\"\n              value=\"\"\n            >\n              <div class=\"flex items-center gap-1.5\">\n                <div\n                  class=\"nf nf-fa-chevron_right relative top-px\"\n                  wf-if=\"room.active\"\n                ></div>\n                <div class=\"text-left\">{{room.name || '...'}}</div>\n              </div>\n              <div>\n                <div class=\"flex gap-1.5 items-center\">\n                  <div\n                    class=\"nf hidden group-hover:block text-gray-300 nf-oct-x flex justify-center items-center relative top-[1px] hover:text-gray-100\"\n                    wf-onclick=\"post('main.rmRoom', event, room)\"\n                  ></div>\n                </div>\n              </div>\n            </button>\n          </div>\n        </div>\n\n        <button\n          class=\"rounded-lg border border-[#dfe2e5] bg-white shadow px-3 py-2 group text-center hover:text-white hover:bg-gray-900 outline-none\"\n          wf-if=\"(state.main.options.oaiKey || state.main.options.xaiKey) &amp;&amp; state.main.tmp.panel === 'rooms'\"\n          wf-onclick=\"post('main.newRoom')\"\n          value=\"\"\n        >\n          Create Room</button\n        ><button\n          class=\"rounded-lg border border-[#dfe2e5] bg-white shadow px-3 py-2 group text-center hover:text-white hover:bg-gray-900 outline-none\"\n          wf-onclick=\"post('main.newThread')\"\n          value=\"\"\n          wf-if=\"(state.main.options.oaiKey || state.main.options.xaiKey) &amp;&amp; state.main.tmp.panel === 'threads' &amp;&amp; (!state.main.thread || state.main.thread?.logs?.length)\"\n        >\n          New Thread\n        </button>\n        <button\n          class=\"rounded-lg border border-[#dfe2e5] bg-white shadow px-3 py-2 group text-center hover:text-white hover:bg-gray-900 outline-none sm:hidden\"\n          wf-onclick=\"post('main.toggleSidebar')\"\n          value=\"\"\n        >\n          Close\n        </button>\n      </div>\n      <div class=\"flex-1 flex flex-col\">\n        <div\n          class=\"border-l border-gray-300 flex justify-center items-center py-16 flex-col gap-4 flex-1\"\n          wf-if=\"!state.main.options.oaiKey &amp;&amp; !state.main.options.xaiKey\"\n          hidden=\"\"\n        >\n          <div class=\"text-6xl\">üîë</div>\n          <div class=\"text-gray-400\">\n            Add at least 1 API key to start chatting.\n          </div>\n        </div>\n        <div\n          class=\"border-l border-gray-300 flex justify-center items-center py-16 flex-col gap-4 flex-1\"\n          wf-if=\"(state.main.options.oaiKey || state.main.options.xaiKey) &amp;&amp; !state.main.thread\"\n          hidden=\"\"\n        >\n          <div\n            class=\"nf nf-fa-star text-6xl text-gray-300\"\n            wf-if=\"!state.main.erotica &amp;&amp; !state.main.director &amp;&amp; !state.main.gameMode &amp;&amp; !state.main.voiceMode\"\n          ></div>\n          <div class=\"text-gray-400\">Create a thread to start chatting!</div>\n        </div>\n\n        <div\n          class=\"flex-1 bg-white border-l border-gray-300 flex flex-col relative sm:pl-8 h-screen p-3 sm:p-8 gap-3 sm:gap-8\"\n          wf-if=\"(state.main.options.oaiKey || state.main.options.xaiKey) &amp;&amp; state.main.thread\"\n          wf-class=\"\"\n        >\n          <div\n            class=\"absolute nf nf-md-menu flex justify-center p-3 sm:hidden rounded-full bottom-5 right-5 bg-gray-100 text-gray-600\"\n            wf-onclick=\"post('main.toggleSidebar')\"\n          ></div>\n          <div>\n            <div class=\"flex items-center group flex-wrap gap-y-1 gap-x-1.5\">\n              <div class=\"text-xl sm:text-3xl\">\n                {{state.main.thread.name || '...'}}\n              </div>\n              <div class=\"flex items-center gap-3\">\n                <div class=\"flex gap-1\">\n                  <div\n                    class=\"text-3xl\"\n                    wf-if=\"state.main.thread.tags?.includes?.('erotica')\"\n                  >\n                    ü•µ\n                  </div>\n                </div>\n                <div\n                  class=\"gap-1 hidden group-hover:flex\"\n                  wf-if=\"!state.main.tmp.threads?.get?.(state.main.thread)?.busy\"\n                >\n                  <button\n                    class=\"nf text-gray-500 text-xl w-8 h-8 nf-oct-pencil\"\n                    wf-if=\"!state.main.tmp.threads?.get?.(state.main.thread)?.suggestingName\"\n                    wf-onclick=\"post('main.renameThread')\"\n                    value=\"\"\n                  ></button>\n                  <button\n                    class=\"nf text-gray-500 text-xl w-8 h-8 nf-md-replay\"\n                    wf-onclick=\"post('main.suggestThreadName')\"\n                    wf-if=\"!state.main.tmp.suggestingName\"\n                    value=\"\"\n                  ></button>\n                </div>\n                <div\n                  class=\"nf text-gray-500 text-xl w-8 h-8 flex justify-center items-center nf-fa-spinner animate-spin\"\n                  wf-onclick=\"post('main.suggestThreadName')\"\n                  wf-if=\"state.main.tmp.threads?.get?.(state.main.thread)?.suggestingName\"\n                  hidden=\"\"\n                ></div>\n                <div\n                  class=\"nf nf-md-chat_processing_outline text-3xl animate-pulse -my-4\"\n                  wf-if=\"state.main.tmp.threads?.get?.(state.main.thread)?.busy\"\n                ></div>\n              </div>\n            </div>\n            <div\n              class=\"flex items-center gap-1.5 group flex-wrap mt-3 max-h-[15vh] shrink-0\"\n            >\n              <div class=\"text-sm relative -top-[1px]\">\n                {{state.main.thread.tags?.length || state.main.tmp.showTagInput ? 'Tags:' : 'Tags'}}\n              </div>\n              <div\n                class=\"text-sm px-2 py-0.5 rounded-full shrink-0 flex items-center gap-2 bg-green-200 text-green-600\"\n                wf-map=\"x of state.main.thread.tags?.slice?.()?.sort?.() || []\"\n              >\n                <div class=\"relative -top-[1px]\">{{x}}</div>\n                <button\n                  class=\"relative -top-[1px] outline-none\"\n                  wf-onclick=\"post('main.rmTag', x)\"\n                  value=\"\"\n                >\n                  √ó\n                </button>\n              </div>\n              <button\n                class=\"nf nf-fa-plus text-gray-400 outline-none text-sm px-1 py-0.5\"\n                wf-if=\"!state.main.tmp.showTagInput\"\n                wf-onclick=\"post('main.toggleTagInput')\"\n                value=\"\"\n              ></button>\n              <label\n                class=\"relative min-w-20\"\n                wf-if=\"state.main.tmp.showTagInput\"\n              >\n                <input\n                  type=\"text\"\n                  placeholder=\"add tag\"\n                  class=\"border px-2 py-0.5 outline-none text-sm rounded-full text-center w-full\"\n                  id=\"taginput2\"\n                  wf-onkeyup=\"post('main.tagKeyUp', event)\"\n                  wf-onblur=\"setTimeout(() =&gt; post('main.toggleTagInput'), 200)\"\n                  value=\"\"\n                  autocomplete=\"off\"\n                  autofocus=\"\"\n                />\n                <div\n                  class=\"border p-2 rounded bg-white shadow max-h-48 overflow-auto absolute left-1 right-1 flex flex-col text-sm gap-1 top-[110%] z-10\"\n                  wf-if=\"state.main.tmp.tagSuggestions?.length\"\n                  hidden=\"\"\n                >\n                  <button\n                    class=\"underline text-blue-600 outline-none\"\n                    wf-map=\"x of state.main.tmp.tagSuggestions\"\n                    wf-onclick=\"post('main.addTag', x)\"\n                    value=\"\"\n                  >\n                    {{x}}\n                  </button>\n                </div>\n              </label>\n              <div class=\"flex items-center gap-1.5\">\n                <button\n                  class=\"nf text-gray-500 nf-md-replay hidden group-hover:block px-1.5 py-0.5 relative -top-[1px] shrink-0\"\n                  wf-if=\"!state.main.tmp.showTagInput &amp;&amp; !state.main.tmp.threads?.get?.(state.main.thread)?.suggestingTags\"\n                  wf-onclick=\"post('main.suggestThreadTags')\"\n                  value=\"\"\n                ></button>\n                <div\n                  class=\"nf text-gray-500 text-xl flex justify-center items-center nf-fa-spinner animate-spin h-[1em]\"\n                  wf-onclick=\"post('main.suggestThreadName')\"\n                  wf-if=\"state.main.tmp.threads?.get(state.main.thread)?.suggestingTags\"\n                  hidden=\"\"\n                ></div>\n              </div>\n            </div>\n          </div>\n          <div\n            class=\"flex-1 basis-0 min-h-0 overflow-auto flex flex-col gap-8 min-h-32 pb-1\"\n            id=\"autoscroll\"\n          >\n            <div\n              class=\"flex-1 flex flex-col justify-center items-center gap-4 pt-6\"\n              wf-if=\"!state.main.displayedLogs.length\"\n            >\n              <div\n                class=\"nf nf-fa-star text-6xl text-gray-300\"\n                wf-if=\"!state.main.erotica &amp;&amp; !state.main.director &amp;&amp; !state.main.gameMode &amp;&amp; !state.main.voiceMode\"\n              ></div>\n              <div\n                class=\"flex gap-1.5\"\n                wf-if=\"state.main.erotica || state.main.director || state.main.gameMode || state.main.voiceMode\"\n              >\n                <div class=\"text-6xl text-gray-300\" wf-if=\"state.main.erotica\">\n                  ü•µ\n                </div>\n              </div>\n              <div class=\"text-gray-400\">Start a conversation!</div>\n            </div>\n            <div\n              wf-ondetach=\"state.main.busy = false\"\n              class=\"flex flex-col gap-3 sm:gap-4\"\n            >\n              <div\n                class=\"\"\n                wf-map=\"log of state.main.displayedLogs.filter(x =&gt; !x.priming)\"\n              >\n                <div class=\"flex flex-col gap-3 lightweight sm:gap-4\">\n                  <div\n                    class=\"rounded-lg border border-[#dfe2e5] bg-white shadow flex justify-between group whitespace-pre-wrap p-4 self-end pb-3.5 gap-1 MsgBox hover:bg-gray-100 w-screen xl:max-w-3xl max-w-full relative mt-4\"\n                    wf-if=\"log.role === 'user'\"\n                    wf-onattach=\"post('main.scroll', _1, log)\"\n                  >\n                    <div class=\"flex-1 flex flex-col\">\n                      <div\n                        wf-if=\"state.main.tmp.threads?.get?.(state.main.thread)?.editing !== log\"\n                        wf-innerhtml=\"markdown(Array.isArray(log.content) ? log.content[0].text : log.content)\"\n                        class=\"flex flex-col gap-3 overflow-auto\"\n                      >\n                        Log content...\n                      </div>\n\n                      <img\n                        wf-if=\"Array.isArray(log.content)\"\n                        class=\"flex flex-col gap-1.5 pt-2 border-t mt-2\"\n                        src=\"../media/__pikachu_pokemon_drawn_by_rio_rio0v0o__1bd2e607737d747a0aa247ca26ab4ee6.png\"\n                        hidden=\"\"\n                      /><textarea\n                        class=\"bg-transparent outline-none w-full h-48\"\n                        wf-if=\"state.main.tmp.threads?.get?.(state.main.thread)?.editing === log\"\n                        value=\"\"\n                        wf-value=\"state.main.tmp.threads.get(state.main.thread).editingContent\"\n                        hidden=\"\"\n                        wf-onattach=\"_1.select()\"\n                      ></textarea>\n                    </div>\n                    <div\n                      class=\"*:p-1 flex absolute right-6 px-4 py-1 -top-3.5 rounded-full border bg-gray-900 text-white border-gray-800\"\n                      wf-class=\"{{replaces flex: state.main.tmp.threads?.get?.(state.main.thread)?.editing === log || log.gameMode ? 'flex' : 'hidden group-hover:flex'}}\"\n                    >\n                      <button\n                        class=\"nf outline-none p-1 nf-md-gamepad_square\"\n                        wf-onclick=\"post('main.toggleGameModeLog', log)\"\n                        value=\"\"\n                        wf-class=\"{{log.gameMode &amp;&amp; 'text-green-500'}}\"\n                      ></button\n                      ><button\n                        class=\"nf nf-oct-pencil outline-none p-1\"\n                        wf-if=\"state.main.tmp.threads?.get?.(state.main.thread)?.editing !== log &amp;&amp; !Array.isArray(log.content)\"\n                        wf-onclick=\"post('main.editLog', log)\"\n                        value=\"\"\n                      ></button\n                      ><button\n                        class=\"nf outline-none nf-md-replay\"\n                        wf-if=\"state.main.tmp.threads?.get?.(state.main.thread)?.editing === log\"\n                        wf-onclick=\"post('main.replayLog', log)\"\n                        value=\"\"\n                      ></button\n                      ><button\n                        class=\"nf outline-none nf-fa-check\"\n                        wf-onclick=\"post('main.saveLog', log)\"\n                        value=\"\"\n                        wf-if=\"state.main.tmp.threads?.get?.(state.main.thread)?.editing === log\"\n                      ></button\n                      ><button\n                        class=\"nf outline-none nf-oct-x\"\n                        wf-onclick=\"post(state.main.tmp.threads?.get?.(state.main.thread)?.editing === log ? 'main.revertLog' : 'main.rmLog', log)\"\n                        value=\"\"\n                      ></button>\n                    </div>\n                  </div>\n                  <div\n                    class=\"rounded-lg border border-[#dfe2e5] bg-white shadow flex justify-between group whitespace-pre-wrap p-4 max-w-3xl pb-3.5 gap-1 MsgBox hover:bg-gray-100 relative mt-4\"\n                    wf-if=\"log.role === 'assistant' &amp;&amp; log.content.trim()\"\n                    wf-onattach=\"post('main.scroll', _1, log)\"\n                  >\n                    <div class=\"flex-1 flex flex-col overflow-auto\">\n                      <div\n                        wf-if=\"state.main.tmp.threads?.get?.(state.main.thread)?.editing !== log\"\n                        wf-innerhtml=\"markdown(log.content)\"\n                        class=\"flex flex-col gap-3\"\n                      >\n                        Log content...\n                      </div>\n\n                      <textarea\n                        class=\"bg-transparent outline-none w-full h-48\"\n                        wf-if=\"state.main.tmp.threads?.get?.(state.main.thread)?.editing === log\"\n                        value=\"\"\n                        wf-value=\"state.main.tmp.threads.get(state.main.thread).editingContent\"\n                        hidden=\"\"\n                        wf-onattach=\"_1.select()\"\n                      ></textarea>\n                    </div>\n                    <div\n                      class=\"flex justify-between flex-col\"\n                      wf-class=\"{{state.main.thread.gameMode &amp;&amp; 'w-6'}}\"\n                    >\n                      <div\n                        class=\"*:p-1 flex absolute right-6 px-4 py-1 -top-3.5 rounded-full border bg-gray-900 text-white border-gray-800\"\n                        wf-class=\"{{replaces flex: state.main.tmp.threads?.get?.(state.main.thread)?.editing === log || log.gameMode ? 'flex' : 'hidden group-hover:flex'}}\"\n                      >\n                        <button\n                          class=\"nf outline-none p-1 nf-md-gamepad_square\"\n                          wf-onclick=\"post('main.toggleGameModeLog', log)\"\n                          value=\"\"\n                          wf-class=\"{{log.gameMode &amp;&amp; 'text-green-500'}}\"\n                        ></button\n                        ><button\n                          class=\"nf nf-oct-pencil outline-none p-1\"\n                          wf-onclick=\"post('main.editLog', log)\"\n                          value=\"\"\n                          wf-if=\"state.main.tmp.threads?.get?.(state.main.thread)?.editing !== log &amp;&amp; !Array.isArray(log.content)\"\n                        ></button\n                        ><button\n                          class=\"nf outline-none nf-md-replay\"\n                          wf-if=\"state.main.tmp.threads?.get?.(state.main.thread)?.editing === log\"\n                          wf-onclick=\"post('main.replayLog', log)\"\n                          value=\"\"\n                        ></button\n                        ><button\n                          class=\"nf outline-none nf-fa-check\"\n                          wf-onclick=\"post('main.saveLog', log)\"\n                          value=\"\"\n                          wf-if=\"state.main.tmp.threads?.get?.(state.main.thread)?.editing === log\"\n                        ></button\n                        ><button\n                          class=\"nf outline-none nf-oct-x\"\n                          wf-onclick=\"post(state.main.tmp.threads?.get?.(state.main.thread)?.editing === log ? 'main.revertLog' : 'main.rmLog', log)\"\n                          value=\"\"\n                        ></button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div\n            id=\"inputbox\"\n            class=\"rounded-lg border bg-white shadow flex items-center justify-between group text-sm hover:bg-gray-100 relative border-[#dfe2e5]\"\n          >\n            <textarea\n              class=\"flex-1 bg-transparent outline-none resize-none p-4 sm:pr-4 pr-16 max-h-[10rem] h-[3.25rem]\"\n              placeholder=\"Type a message\"\n              wf-onkeyup=\"rawctrls.main.actions.msgKeyUp(event)\"\n              value=\"\"\n              wf-onkeydown=\"rawctrls.main.actions.msgKeyDown(event)\"\n            ></textarea>\n            <div\n              class=\"self-stretch flex border-l border-[#dfe2e5] relative items-center group\"\n              wf-if=\"state.main.models.length || state.main.tmp.loadingModels\"\n            >\n              <div\n                class=\"absolute bottom-[100%] right-0 pb-2 min-w-64\"\n                wf-if=\"state.main.tmp.showModels\"\n                id=\"modellist\"\n                hidden=\"\"\n              >\n                <div\n                  class=\"border p-2 rounded bg-white shadow max-h-48 overflow-auto left-1 right-1 flex flex-col text-sm gap-1 z-10 border-slate-300\"\n                >\n                  <button\n                    class=\"text-blue-600 outline-none flex justify-between items-center gap-3 text-left\"\n                    wf-onclick=\"post('main.changeModel', x.id)\"\n                    value=\"\"\n                    wf-map=\"x of state.main.models\"\n                  >\n                    <div class=\"underline\">{{x.id.split(':')[1]}}</div>\n                    <div\n                      class=\"text-sm truncate max-w-24 decoration-none text-slate-500 shrink-0\"\n                    >\n                      {{new Date(x.created * 1000).toLocaleString('en-US', { month: 'short', year: 'numeric' })}}\n                    </div>\n                  </button>\n                </div>\n              </div>\n              <button\n                class=\"px-4 h-full text-gray-600 hover:text-gray-900 outline-none\"\n                wf-if=\"!state.main.loadingModels\"\n                wf-onclick=\"post('main.toggleShowModels')\"\n                value=\"\"\n              >\n                {{state.main.model.split(':')[1]}}\n              </button>\n              <div\n                class=\"nf text-gray-500 text-xl w-8 h-8 flex justify-center items-center nf-fa-spinner animate-spin mx-4\"\n                wf-onclick=\"post('main.suggestThreadName')\"\n                wf-if=\"state.main.tmp.loadingModels\"\n                hidden=\"\"\n              ></div>\n              <div\n                class=\"nf text-gray-500 text-xl w-8 h-8 justify-center items-center mx-4 nf-weather-refresh hidden group-hover:flex\"\n                wf-onclick=\"post('main.listModels')\"\n                wf-if=\"!state.main.tmp.loadingModels\"\n              ></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>\n","components/Dialogs.html":"<!doctype html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <title>Dialogs.html</title>\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1, maximum-scale=1\"\n    />\n    <script>\n      window.rootPrefix = /^\\/(files|preview)\\//.test(location.pathname)\n        ? location.pathname.split('/').slice(0, 4).join('/')\n        : '/';\n    </script>\n    <script type=\"module\" src=\"../webfoundry/ifdesigner.js\"></script>\n    <script src=\"../webfoundry/head.js\"></script>\n  </head>\n  <body\n    class=\"flex flex-col [&amp;&gt;div:first-child]:flex-1 min-h-screen\"\n    style=\"display: none\"\n  >\n    <div class=\"p-16 flex flex-col gap-12\">\n      <div class=\"grid grid-cols-3\">\n        <div class=\"flex flex-col gap-6\">\n          <div class=\"text-4xl\">PromptDialog</div>\n          <form\n            id=\"PromptDialog\"\n            class=\"w-84 rounded-xl bg-white/80 shadow flex flex-col gap-2 border border-slate-200 text-neutral-950 p-4 backdrop-blur-md\"\n            method=\"dialog\"\n            wf-onsubmit=\"this.submit(event)\"\n          >\n            <div wf-if=\"this.props.title?.trim?.()\">\n              {{this.props.title.trim()}}\n            </div>\n            <input\n              class=\"px-3 border rounded-lg outline-none border-slate-300 py-0.5\"\n              wf-placeholder=\"this.props.placeholder || '...'\"\n              placeholder=\"...\"\n              wf-value=\"this.props.value\"\n              value=\"\"\n              wf-onkeydown=\"this.keyDown(event)\"\n              wf-class=\"{{replaces border-slate-300: !this.dirty || this.valid ? 'border-slate-300' : 'border-red-300'}}\"\n              wf-onattach=\"_1.select()\"\n            />\n            <div wf-if=\"this.error\" class=\"text-sm text-yellow-600\">\n              {{this.error}}\n            </div>\n            <div class=\"flex gap-2\">\n              <button\n                value=\"cancel\"\n                class=\"px-3 flex-1 bg-slate-200 rounded-md hover:bg-slate-300 py-1\"\n              >\n                Cancel</button\n              ><button\n                value=\"ok\"\n                class=\"px-3 flex-1 rounded-md text-white hover:bg-slate-900 bg-slate-800 py-1\"\n              >\n                OK\n              </button>\n            </div>\n          </form>\n        </div>\n        <div class=\"flex flex-col gap-6\">\n          <div class=\"text-4xl\">ShareThreadDialog</div>\n          <form\n            id=\"ShareThreadDialog\"\n            class=\"w-84 rounded-xl bg-white/80 shadow flex flex-col gap-2 border border-slate-200 text-neutral-950 p-4 backdrop-blur-md\"\n            method=\"dialog\"\n            wf-onsubmit=\"this.submit(event)\"\n          >\n            <div wf-if=\"this.props.title?.trim?.()\">Share Thread by Room</div>\n            <div class=\"\" wf-map=\"room of state.main.options.rooms\">\n              <button\n                class=\"rounded-lg border border-[#dfe2e5] bg-white shadow px-3 py-2 flex items-center justify-between group text-sm hover:bg-gray-900 hover:text-white outline-none w-full lightweight\"\n                wf-onclick=\"this.toggle(room.id)\"\n                value=\"\"\n                type=\"button\"\n              >\n                <div class=\"flex items-center gap-1.5\">\n                  <div\n                    class=\"nf nf-fa-chevron_right relative top-px\"\n                    wf-if=\"this.rooms.includes(room.id)\"\n                  ></div>\n                  <div class=\"text-left\">{{room.name || '...'}}</div>\n                </div>\n              </button>\n            </div>\n\n            <div class=\"flex gap-2\">\n              <button\n                value=\"cancel\"\n                class=\"px-3 flex-1 bg-slate-200 rounded-md hover:bg-slate-300 py-1\"\n              >\n                Cancel</button\n              ><button\n                value=\"ok\"\n                class=\"px-3 flex-1 rounded-md text-white hover:bg-slate-900 bg-slate-800 py-1\"\n              >\n                Apply\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n      <div class=\"flex flex-col gap-6\">\n        <div class=\"text-4xl\">GameModeDialog</div>\n        <div\n          id=\"GameModeDialog\"\n          class=\"rounded-lg shadow-lg text-neutral-50 max-w-7xl flex flex-col gap-4 h-[80vh] w-screen bg-neutral-950 p-8\"\n          wf-onattach=\"post('game.init')\"\n        >\n          <style>\n            #GameModeDialog p {\n              display: inline;\n            }\n          </style>\n\n          <div\n            class=\"text-center text-7xl flex-1 flex justify-center items-center\"\n            wf-if=\"state.game.wait\"\n          >\n            <span class=\"nf nf-fa-star animate-ping\"></span>\n          </div>\n          <div\n            class=\"scrollarea flex flex-col gap-4 flex-1 overflow-auto text-3xl select-none\"\n            wf-onclick=\"post('game.next')\"\n            wf-if=\"!state.game.wait\"\n          ></div>\n          <div class=\"text-sm text-right\">\n            {{state.game.title}} ({{`${state.game.i + 1} / ${state.game.src.length}`}})\n          </div>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>\n"}